<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<script src="/jquery-basic/js/jquery-3.1.0.js"></script>
</head>
<body>
<form id="ajaxForm" action="/jquery-basic/ajaxfile/exam02" method="post" enctype="multipart/form-data">
	<input type="text" name="msg" /><br>
	<input type="file" name="attachFile" multiple="multiple" />
	<button type="button">업로드</button>
</form>
<script>
	$("button").click(function () {
		var files = $("input[name=attachFile]")[0].files;
		
		var fd = new FormData();
			fd.append("msg", $("[name=msg]").val());
			for (var i = 0; i < files.length; i++) {
				fd.append("attachFile"+i, files[i]);
			}
		
		$.ajax({
			url: "/jquery-basic/ajaxfile/exam02",
			data: fd,
			type: "POST",
			processData: false, // 파라미터를 name=value로 보내지 마라
			contentType: false, // contenttype을 설정하지 않음
			success: function () {
				alert("파일업로드성공");
			}
		})
	});
	
	
	$("input[type=file]").change(function () {
		var files = $("input[name=attachFile]")[0].files;
		
		var fd = new FormData();
			fd.append("msg", $("[name=msg]").val());
			for (var i = 0; i < files.length; i++) {
				fd.append("attachFile"+i, files[i]);
			}
		
		$.ajax({
			url: "/jquery-basic/ajaxfile/exam02",
			data: fd,
			type: "POST",
			processData: false, // 파라미터를 name=value로 보내지 마라
			contentType: false, // contenttype을 설정하지 않음
			success: function () {
				alert("파일업로드성공");
			}
		})
	});
</script>
</body>
</html>